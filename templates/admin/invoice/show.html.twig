{% extends 'base.html.twig' %}

{% block title %}Facture #{{ invoice.id }} - Factureo{% endblock %}

{% block body %}
    <div class="flex">
        {{ component('Admin:Sidebar') }}
        <div class="w-3/4 mx-auto my-6 lg:ml-[300px] h-full pl-16">
            <div class="flex items-center px-6 py-5 justify-between w-full border-b h-[10%] border-gray-100">
                <div class="flex space-x-2 items-center">
                    <h2 class="text-3xl -tracking-[0.96px] font-[600]">Facture #{{ invoice.id }}</h2>
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none"
                         class="hidden">
                        <g clip-path="url(#clip0_622_773)">
                            <path d="M6.05998 6.00004C6.21672 5.55449 6.52608 5.17878 6.93328 4.93946C7.34048 4.70015 7.81924 4.61267 8.28476 4.69252C8.75028 4.77236 9.17252 5.01439 9.4767 5.37573C9.78087 5.73706 9.94735 6.19439 9.94665 6.66671C9.94665 8.00004 7.94665 8.66671 7.94665 8.66671M7.99998 11.3334H8.00665M14.6666 8.00004C14.6666 11.6819 11.6819 14.6667 7.99998 14.6667C4.31808 14.6667 1.33331 11.6819 1.33331 8.00004C1.33331 4.31814 4.31808 1.33337 7.99998 1.33337C11.6819 1.33337 14.6666 4.31814 14.6666 8.00004Z"
                                  stroke="#98A2B3" stroke-width="1.33333" stroke-linecap="round"
                                  stroke-linejoin="round"></path>
                        </g>
                        <defs>
                            <clipPath id="clip0_622_773">
                                <rect width="16" height="16" fill="white"></rect>
                            </clipPath>
                        </defs>
                    </svg>
                    <p class="hidden rounded-full bg-slate-900 text-white p-1 w-6 h-6 flex justify-center items-center text-[14px]">
                        10
                    </p>
                </div>
                <div class="flex space-x-2">
                    <a href="#"
                       class="text-slate-900 border border-gray-200 rounded-lg px-4 py-3 hover:bg-gray-100 flex items-center space-x-2 text-[14px]">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
                            <path d="M8.08148 10.2908L8.08148 2.26343" stroke="#0E2354" stroke-width="1.2"
                                  stroke-linecap="round" stroke-linejoin="round"></path>
                            <path d="M10.0255 8.33899L8.08147 10.291L6.13747 8.33899" stroke="#0E2354"
                                  stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"></path>
                            <path d="M11.5061 5.00024H12.2121C13.7521 5.00024 15 6.21235 15 7.70892L15 11.2989C15 12.7911 13.7552 14.0002 12.2189 14.0002L3.78866 14.0002C2.24866 14.0002 1.00001 12.7874 1.00001 11.2916L1.00001 7.70083C1.00001 6.20941 2.24564 5.00024 3.7811 5.00024H4.49396"
                                  stroke="#0E2354" stroke-width="1.2" stroke-linecap="round"
                                  stroke-linejoin="round"></path>
                        </svg>
                        <p>Exporter</p>
                    </a>
                    <button class="hidden text-white bg-slate-900 px-4 py-3 rounded-lg text-[14px] flex items-center space-x-2 cursor-pointer"
                            onclick="(() => {
                                document.getElementById('leftsidebar').classList.toggle('translate-x-full');
                            }) ()"
                    >
                        <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 22 22" fill="none">
                            <path d="M11 21C16.5228 21 21 16.5228 21 11C21 5.47715 16.5228 1 11 1C5.47715 1 1 5.47715 1 11C1 16.5228 5.47715 21 11 21Z"
                                  stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                            <path d="M11 11V15" stroke="white" stroke-width="2" stroke-linecap="round"
                                  stroke-linejoin="round"></path>
                            <circle cx="11" cy="7" r="1" fill="white"></circle>
                        </svg>
                        <p>Informations</p>
                    </button>
                </div>
            </div>
            <div class="bg-slate-50 h-[90%] mt-6 py-6 overflow-x-hidden">
                <div id="pdf" class="w-[900px] bg-white rounded-lg border border-gray-200 h-fit mx-auto px-16 py-14">
                    <h2 class="text-3xl font-semibold -tracking-[0.96px]">Facture #{{ invoice.id }}</h2>
                    <div class="flex justify-between mt-14">
                        <div class="flex flex-col space-y-2 min-w-[300px]">
                            <p class="text-sm -tracking-[0.42px] text-slate-400">Client</p>
                            <p>{{ invoice.customer.firstName ~ ' ' ~ invoice.customer.lastName }}</p>
                            <p>{{ invoice.customer.fullAdress }}</p>
                            <p>75012 Paris</p>
                            <p>{{ invoice.customer.phoneNumber }}</p>
                        </div>
                        <div class="flex flex-col space-y-2 min-w-[300px]">
                            <p class="text-sm -tracking-[0.42px] text-slate-400">Entreprise</p>
                            <p>{{ invoice.company.name }}</p>
                            <p>{{ invoice.company.fullAdress }}</p>
                            <p>75012 Paris</p>
                            <p>{{ invoice.company.phoneNumber }}</p>
                        </div>
                    </div>
                    <div class="min-h-[500px] rounded-lg border border-gray-200 mt-12 overflow-x-auto flex flex-col">
                        <div class="flex bg-gray-100 h-11 rounded-t-lg items-center justify-start">
                            <div class="px-6 min-w-16">
                                <input type="checkbox"
                                       onclick="
                                       ((source) => {
                                           let checkboxes = document.getElementsByClassName('checkbox-all');
                                           for (let i = 0; i < checkboxes.length; i++) {
                                               let checkbox = checkboxes[i];
                                               checkbox.checked = source.checked
                                           }
                                       }) (this)"
                                >
                            </div>
                            <div class="px-6 min-w-[163px]">
                                <p class="text-sm text-slate-700">Intitulé</p>
                            </div>
                            <div class="px-6 min-w-[180px]">
                                <p class="text-sm text-slate-700">Prix unitaire</p>
                            </div>
                            <div class="px-6 min-w-[150px]">
                                <p class="text-sm text-slate-700">Quantité</p>
                            </div>
                            <div class="px-6 min-w-[150px]">
                                <p class="text-sm text-slate-700">Total</p>
                            </div>
                        </div>
                        <div>
                            {% for invoiceDetail in invoice.details %}
                                <div class="h-[72px] flex items-center border-b border-gray-200 w-full hover:bg-slate-50">
                                    <div class="px-6 min-w-16">
                                        <input type="checkbox" class="checkbox-all">
                                    </div>
                                    <div class="px-6 max-w-[163px]">
                                        <p class="text-sm truncate">{{ invoiceDetail.element }}</p>
                                    </div>
                                    <div class="px-6 min-w-[180px]">
                                        <p class="text-sm">{{ invoiceDetail.unitPrice }} €</p>
                                    </div>
                                    <div class="px-6 min-w-[150px]">
                                        <p class="text-sm text-slate-700">{{ invoiceDetail.quantity }}</p>
                                    </div>
                                    <div class="px-6 min-w-[150px]">
                                        <p class="text-sm text-slate-700">{{ invoiceDetail.unitPrice * invoiceDetail.quantity }} €</p>
                                    </div>
                                </div>
                            {% endfor %}
                        </div>
                    </div>
                    <div class="flex justify-between items-center bg-slate-100 px-6 py-8 rounded-lg border border-gray-200 mt-14 mb-6">
                        <div class="space-y-2">
                            <p>Sous-total</p>
                            <p>Taxes</p>
                        </div>
                        <div class="flex space-x-4">
                            <div class="text-end space-y-2">
                                <p>{{ invoice.totalPrice }} €</p>
                                <p>Taxes</p>
                            </div>
                            <div class="w-[150px] space-y-2">
                                <p>Total</p>
                                <p class="font-semibold">{{ invoice.totalPrice }} €</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}
